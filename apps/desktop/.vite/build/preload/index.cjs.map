{"version":3,"file":"index.cjs","sources":["../../../src/shared/ipc.ts","../../../src/preload/index.ts"],"sourcesContent":["export const IPC = {\n  PING: \"app:ping\",\n  WIN_MINIMIZE: \"win:minimize\",\n  WIN_MAXIMIZE: \"win:maximize\",\n  WIN_TOGGLE_MAXIMIZE: \"win:toggleMaximize\",\n  WIN_CLOSE: \"win:close\",\n\n  DB_SETTINGS_GET: \"db:settings:get\",\n  DB_SETTINGS_SET: \"db:settings:set\",\n  DB_EVENTLOG_APPEND: \"db:eventLog:append\",\n  DB_EVENTLOG_LIST: \"db:eventLog:list\",\n} as const;\n\nexport type IpcChannel = (typeof IPC)[keyof typeof IPC];","import { contextBridge, ipcRenderer } from \"electron\";\nimport { IPC } from \"../shared/ipc\";\nconsole.log(\"[preload] DB_SETTINGS_SET =\", IPC.DB_SETTINGS_SET);\n\n\ncontextBridge.exposeInMainWorld(\"electron\", {\n  ping: () => ipcRenderer.invoke(IPC.PING) as Promise<{ ok: boolean; ts: number }>,\n\n  window: {\n    minimize: () => ipcRenderer.invoke(IPC.WIN_MINIMIZE),\n    maximize: () => ipcRenderer.invoke(IPC.WIN_MAXIMIZE),\n    toggleMaximize: () => ipcRenderer.invoke(IPC.WIN_TOGGLE_MAXIMIZE),\n    close: () => ipcRenderer.invoke(IPC.WIN_CLOSE),\n  },\n\n  db: {\n    settings: {\n      get: (key: string) =>\n        ipcRenderer.invoke(IPC.DB_SETTINGS_GET, key) as Promise<string | null>,\n      set: (key: string, value: string) =>\n        ipcRenderer.invoke(IPC.DB_SETTINGS_SET, key, value) as Promise<boolean>,\n    },\n    eventLog: {\n      append: (type: string, payload: unknown) =>\n        ipcRenderer.invoke(IPC.DB_EVENTLOG_APPEND, type, JSON.stringify(payload)) as Promise<boolean>,\n      list: (limit?: number) =>\n        ipcRenderer.invoke(IPC.DB_EVENTLOG_LIST, limit ?? 100) as Promise<any[]>,\n    },\n  },\n});\n"],"names":["contextBridge","ipcRenderer"],"mappings":";;AAAO,MAAM,MAAM;AAAA,EACjB,MAAM;AAAA,EACN,cAAc;AAAA,EACd,cAAc;AAAA,EACd,qBAAqB;AAAA,EACrB,WAAW;AAAA,EAEX,iBAAiB;AAAA,EACjB,iBAAiB;AAAA,EACjB,oBAAoB;AAAA,EACpB,kBAAkB;AACpB;ACTA,QAAQ,IAAI,+BAA+B,IAAI,eAAe;AAG9DA,SAAAA,cAAc,kBAAkB,YAAY;AAAA,EAC1C,MAAM,MAAMC,SAAAA,YAAY,OAAO,IAAI,IAAI;AAAA,EAEvC,QAAQ;AAAA,IACN,UAAU,MAAMA,SAAAA,YAAY,OAAO,IAAI,YAAY;AAAA,IACnD,UAAU,MAAMA,SAAAA,YAAY,OAAO,IAAI,YAAY;AAAA,IACnD,gBAAgB,MAAMA,SAAAA,YAAY,OAAO,IAAI,mBAAmB;AAAA,IAChE,OAAO,MAAMA,SAAAA,YAAY,OAAO,IAAI,SAAS;AAAA,EAAA;AAAA,EAG/C,IAAI;AAAA,IACF,UAAU;AAAA,MACR,KAAK,CAAC,QACJA,SAAAA,YAAY,OAAO,IAAI,iBAAiB,GAAG;AAAA,MAC7C,KAAK,CAAC,KAAa,UACjBA,SAAAA,YAAY,OAAO,IAAI,iBAAiB,KAAK,KAAK;AAAA,IAAA;AAAA,IAEtD,UAAU;AAAA,MACR,QAAQ,CAAC,MAAc,YACrBA,SAAAA,YAAY,OAAO,IAAI,oBAAoB,MAAM,KAAK,UAAU,OAAO,CAAC;AAAA,MAC1E,MAAM,CAAC,UACLA,SAAAA,YAAY,OAAO,IAAI,kBAAkB,SAAS,GAAG;AAAA,IAAA;AAAA,EACzD;AAEJ,CAAC;"}